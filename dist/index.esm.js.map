{"version":3,"file":"index.esm.js","sources":["../src/index.js"],"sourcesContent":["class Bus {\n  constructor () {\n    this._handlerMap = {}\n    this._id = 0\n  }\n\n  on (type, handler) {\n    var _t = this\n\n    if (!(type in _t._handlerMap)) {\n      _t._handlerMap[type] = {}\n    }\n\n    _t._handlerMap[type][++_t._id] = handler\n\n    return _t._id\n  }\n\n  off (type, id) {\n    var _t = this\n    \n    if ((type in _t._handlerMap) && (id in _t._handlerMap[type])) {\n      delete _t._handlerMap[type][id]\n    }\n  }\n\n  fire (type, ...args) {\n    var _t = this\n\n    if (type in _t._handlerMap) {\n      var handlers = _t._handlerMap[type]\n      for (let key in handlers) {\n        handlers[key].apply(null, args)\n      }\n    }\n  }\n\n  once (type, handler) {\n    var _t = this\n    var id = _t.on(type, (ret) => {\n      handler(ret)\n      _t.off(type, id)\n    })\n\n    return id\n  }\n}\n\nexport default Bus"],"names":["Bus","_handlerMap","_id","type","handler","_t","id","handlers","args","key","apply","on","ret","off"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;IAAMA;iBACW;;;SACRC,WAAL,GAAmB,EAAnB;SACKC,GAAL,GAAW,CAAX;;;;;uBAGEC,MAAMC,SAAS;UACbC,KAAK,IAAT;;UAEI,EAAEF,QAAQE,GAAGJ,WAAb,CAAJ,EAA+B;WAC1BA,WAAH,CAAeE,IAAf,IAAuB,EAAvB;;;SAGCF,WAAH,CAAeE,IAAf,EAAqB,EAAEE,GAAGH,GAA1B,IAAiCE,OAAjC;;aAEOC,GAAGH,GAAV;;;;wBAGGC,MAAMG,IAAI;UACTD,KAAK,IAAT;;UAEKF,QAAQE,GAAGJ,WAAZ,IAA6BK,MAAMD,GAAGJ,WAAH,CAAeE,IAAf,CAAvC,EAA8D;eACrDE,GAAGJ,WAAH,CAAeE,IAAf,EAAqBG,EAArB,CAAP;;;;;yBAIEH,MAAe;UACfE,KAAK,IAAT;;UAEIF,QAAQE,GAAGJ,WAAf,EAA4B;YACtBM,WAAWF,GAAGJ,WAAH,CAAeE,IAAf,CAAf;;0CAJWK,IAGe;cAAA;;;aAErB,IAAIC,GAAT,IAAgBF,QAAhB,EAA0B;mBACfE,GAAT,EAAcC,KAAd,CAAoB,IAApB,EAA0BF,IAA1B;;;;;;yBAKAL,MAAMC,SAAS;UACfC,KAAK,IAAT;UACIC,KAAKD,GAAGM,EAAH,CAAMR,IAAN,EAAY,UAACS,GAAD,EAAS;gBACpBA,GAAR;WACGC,GAAH,CAAOV,IAAP,EAAaG,EAAb;OAFO,CAAT;;aAKOA,EAAP;;;;;;;;"}